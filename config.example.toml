[config]
# Your license key (mandatory). Must not be empty.
LICENSE_KEY = ""

# The main RPC URL for Solana interactions. Use a high-performance private RPC for best results.
RPC_URL = "https://api.mainnet-beta.solana.com"

# Stream transport mode: "grpc" (Yellowstone gRPC) or "ws" (WebSocket RPC pub/sub).
# gRPC is faster and more reliable; WS is a fallback if gRPC is unavailable.
STREAM_TRANSPORT = "grpc"

# The gRPC Geyser URL for streaming real-time account/transaction updates.
# Required when STREAM_TRANSPORT = "grpc".
GRPC_URL = "https://solana-yellowstone-grpc.publicnode.com:443"

# Token for authenticating with the gRPC endpoint (if required). Leave empty if not needed.
GRPC_TOKEN = ""

# WebSocket RPC endpoint for real-time updates.
# Required when STREAM_TRANSPORT = "ws".
WS_URL = ""

# The wallet private key (Base58 encoded) used for signing transactions.
# Keep this secret
WALLET_PRIVATE_KEY_B58 = ""

# Preferred region for SWQoS providers. Valid values: NewYork, Frankfurt, Amsterdam, SLC, Tokyo, London, LosAngeles, Default
PREFERRED_REGION = "NewYork"

# The public key of a Durable Nonce account, used to ensure transaction validity over time.
# Leave empty if not using durable nonces.
DURABLE_NONCE_PUBKEY = ""

# Enable saving logs to .logs/solana-trading-bot.log file (default: true).
SAVE_LOGS = true


[trading]
# === Core Trading Parameters ===

# The fixed amount of SOL to spend on each initial buy order.
BUY_AMOUNT_SOL = 0.025

# The priority fee (in SOL) added to transactions to encourage faster inclusion by validators.
# Higher values increase transaction priority but cost more.
PRIORITY_FEE_SOL = 0.00011

# The bribe amount (in SOL) sent to SWQoS (Jito, Nozomi or Astralane) for faster inclusion.
# Used for MEV protection and faster execution.
BRIBE_SOL = 0.00102

# The maximum allowed slippage for buy orders (as a percentage, e.g., 50 = 50%).
# Higher values allow larger price movements but increase execution risk.
BUY_SLIPPAGE_PERCENT = 50

# The maximum allowed slippage for sell orders (as a percentage, e.g., 99 = 99%).
# Higher values help ensure exits complete even in volatile conditions.
SELL_SLIPPAGE_PERCENT = 99

# The maximum number of concurrent open positions allowed.
# Set to 0 to disable position limits (not recommended).
MAX_POSITIONS = 3

# Hard stop loss percentage (must be negative, e.g., -20 means sell if PnL drops below -20%).
# Must be between -100 and 0. Triggers an immediate exit when breached.
STOP_LOSS = -20

# Take profit levels: defined as { target_pnl_percent = X, sell_percent = Y }.
# When PnL reaches X%, sell Y% of the remaining position.
# sell_percent must be between 1 and 100.
TAKE_PROFIT_LEVELS = [
  { target_pnl_percent = 8,  sell_percent = 20 },
  { target_pnl_percent = 10, sell_percent = 25 },
  { target_pnl_percent = 15, sell_percent = 25 },
  { target_pnl_percent = 20, sell_percent = 30 },
  { target_pnl_percent = 30, sell_percent = 100 },
]

# Dynamic Trailing Stop Loss (DTSL) levels.
# As PnL increases, the stop loss floor is raised to lock in profits.
# Format: { target_pnl_percent = X, floor_pnl_percent = Y, sell_percent = Z, timer_seconds = T }
# - target_pnl_percent: When PnL reaches this level, the floor is activated
# - floor_pnl_percent: The minimum PnL floor (must be < target_pnl_percent)
# - sell_percent: Percentage of position to sell (1-100)
# - timer_seconds: Optional. If set, requires PnL to stay above floor for this duration before selling
# Empty list disables DTSL.
DTSL_LEVELS = [
  { target_pnl_percent = 8,   floor_pnl_percent = 4,   sell_percent = 20 },
  { target_pnl_percent = 12,  floor_pnl_percent = 6,   sell_percent = 20, timer_seconds = 20 },
  { target_pnl_percent = 16,  floor_pnl_percent = 8,   sell_percent = 25, timer_seconds = 25 },
  { target_pnl_percent = 20,  floor_pnl_percent = 10,  sell_percent = 35, timer_seconds = 30 },
  { target_pnl_percent = 25,  floor_pnl_percent = 12,  sell_percent = 100, timer_seconds = 30 },
  { target_pnl_percent = 12,  floor_pnl_percent = -2,  sell_percent = 100 },
  { target_pnl_percent = 20,  floor_pnl_percent = -5,  sell_percent = 100 },
]


# === Time-Based Exit Rules ===

# Force exit if a position is held longer than MAX_HOLD_TIME_SECONDS.
# When enabled, positions are closed after the specified duration regardless of PnL.
ENABLE_MAX_HOLD_TIME = true
MAX_HOLD_TIME_SECONDS = 300

# Force exit if PnL remains negative for NEGATIVE_PNL_TIMER_SECONDS.
# When enabled, positions with negative PnL are closed after the timer expires.
ENABLE_NEGATIVE_PNL_TIMER = false
NEGATIVE_PNL_TIMER_SECONDS = 15

# Force exit if PnL is above a minimum target for a set duration.
# When enabled, positions are closed after maintaining the target profit for the specified time.
ENABLE_MIN_PROFIT_TARGET = true
MIN_PROFIT_TARGET_PNL_PERCENT = 10
MIN_PROFIT_TARGET_SECONDS = 30


# === Simulation and Re-entry Controls ===

# Run in simulation mode (paper trading) if true. No real SOL is spent.
SIMULATE = false

# When true, allows re-entering mints that already closed out (requires new signal).
# Set to false to prevent re-entry after a position closes.
ALLOW_REENTER = false

# When true (requires ALLOW_REENTER=true), closed positions stay in watchlist and
# can be re-entered automatically when dip/flow conditions are favorable.
ENABLE_SCALPING = false

# When true, auto-entries must pass dip/flow gates before buying.
# When false, buy immediately once risk checks pass.
ENABLE_ENTRY_DIP = true


# === Scalper / DCA Settings ===
# Requires ENABLE_SCALPING = true.

# Enable DCA (Dollar Cost Averaging) behavior.
# When false, all DCA functionality is disabled regardless of other DCA settings.
ENABLE_DCA = true

# Minimum interest score required to enter a trade (derived from volume, flow, dip).
# Higher values filter out lower-quality opportunities. Set to 0.0 to disable scoring filter.
ENTRY_INTEREST_SCORE_MIN = 0.0

# Cooldown (in seconds) between buy attempts for the same mint.
# Prevents rapid re-entry on the same token. Lower values allow more frequent entries.
BUY_THROTTLE_SECS = 2

# Maximum portfolio exposure allowed as a percentage of total equity (0-100).
# Limits total capital deployed across all positions. Higher values allow more aggressive positioning.
MAX_EXPOSURE_PCT = 50.0

# Maximum number of DCA (Dollar Cost Averaging) buys allowed per position.
# Each DCA buy adds to a losing position to average down entry price. Set to 0 to disable DCA.
DCA_MAX = 2

# Cooldown (in seconds) between DCA buys.
# Must be > 0 when DCA_MAX > 0. Prevents too-frequent DCA adds.
DCA_COOLDOWN_SECS = 20

# Decay factor applied to each subsequent DCA size (0.1-1.0).
# Each DCA buy is `previous_size * DCA_DECAY`. 0.7 means each add is 70% of the previous.
DCA_DECAY = 0.7

# Enable simple loss-timer DCA: when underwater by threshold for X seconds, trigger DCA.
# When enabled, DCA is triggered if position stays below the threshold for the timer duration.
DCA_ENABLE_LOSS_TIMER = true
DCA_LOSS_TIMER_SECONDS = 6
DCA_LOSS_TRIGGER_UNDERWATER_PCT = 10.0


# === Execution Reliability ===

# Number of retries for failed transactions.
# Must be at least 1. Higher values improve reliability but may delay exits.
RETRY_MAX_ATTEMPTS = 3

# Base delay (milliseconds) between retries. Uses exponential backoff.
# Must be at least 1. Higher values reduce network load but slow recovery.
RETRY_BACKOFF_MS = 500

# Error messages that trigger a retry. Case-insensitive substring matching.
# Common values: "Slippage", "Exceeded", "Too much SOL"
RETRY_ON_ERRORS = ["Slippage", "Transport", "H2Protocol", "Timeout"]

# Extra slippage applied (in basis points, 100 bps = 1%) on the final sell retry to ensure exit.
# Helps punch through stuck pools. Maximum 10000 bps (100%). Default: 1000 bps (10%).
RETRY_SELL_SLIPPAGE_BOOST_BPS = 1000

# Mints to never trade (rugs, honeypots, etc.).
# Add token mint addresses as strings to permanently blacklist them.
BLACKLISTED_MINTS = []


[scoring]
# === Interest Score Filters ===

# Minimum trades required in the last 30s window.
# Higher values filter out low-activity tokens. Helps avoid dead coins.
MIN_TRADES_30S = 10

# Minimum volume (in SOL) required in various time windows.
# Higher values ensure sufficient liquidity before entering.
MIN_VOL_5S_SOL = 0.05
MIN_VOL_2M_SOL = 0.5
MIN_VOL_5M_SOL = 1.0
MIN_VOL_15M_SOL = 0.0
MIN_VOL_30M_SOL = 0.0

# Minimum trades required in longer windows (5m filter helps avoid dead coins).
MIN_TRADES_5M = 0
MIN_TRADES_15M = 0
MIN_TRADES_30M = 0

# Maximum allowed data staleness (seconds).
# Rejects entries if the most recent trade data is older than this threshold.
MAX_FRESHNESS_SECS = 10

# Global drawdown filter: Do not enter if price is >X% down from all-time high (prevents buying dead bounces).
# Set to 0.0 to disable. Higher values are more restrictive.
MAX_GLOBAL_DRAWDOWN_PCT = 0.0


# === Entry Gates ===

# Required dip range (from local high) to consider entry.
# Only enters when the current price is between these percentages below the recent high.
ENTRY_DIP_MIN_PCT = 10.0
ENTRY_DIP_MAX_PCT = 40.0

# Minimum buy share (0.0-1.0) required to enter.
# 0.6 = 60% of recent volume must be buys. Higher values require stronger buy pressure.
MIN_BUY_SHARE_FOR_ENTRY = 0.6


# === Entry Dip Weights ===

# Defines how the "entry dip" is calculated by weighting different timeframes.
# Each weight is 0.0-1.0. Weights don't need to sum to 1.0, but if all are zero, defaults to 15s-only.
# Heavy weight on shorter timeframes (5s, 15s) for scalping volatility.
ENTRY_DIP_WEIGHT_1S = 0.0
ENTRY_DIP_WEIGHT_5S = 0.0
ENTRY_DIP_WEIGHT_15S = 1.0
ENTRY_DIP_WEIGHT_30S = 0.0
ENTRY_DIP_WEIGHT_2M = 0.0
ENTRY_DIP_WEIGHT_5M = 0.0
ENTRY_DIP_WEIGHT_15M = 0.0
ENTRY_DIP_WEIGHT_30M = 0.0

# Rug Protection: If 5m return drops more than X%, interest score is nuked.
# Prevents entering tokens that are rapidly declining. Higher values are more permissive.
RUGGED_5M_RETURN_MAX_DROP_PCT = 75.0


# === Entry Rebound Confirmation ===

# Require price/flow recovery before entering (anti-knife-catch protection).
# When enabled, waits for a price bounce and buy flow recovery before entering.
ENTRY_ENABLE_REBOUND_CONFIRMATION = false

# Max age (seconds) of the dip low to consider for rebound.
# Only considers rebounds if the low point occurred within this window.
ENTRY_REBOUND_MAX_AGE_SECS = 0

# Required short-term price bounce (percentage) after the dip.
# The price must recover by at least this amount before entry is allowed.
ENTRY_REBOUND_MIN_SHORT_UP_PCT = 0.0

# Required buy share (0.0-1.0) during the bounce.
# The recovery must show at least this percentage of buy volume.
ENTRY_REBOUND_MIN_BUY_SHARE_SHORT = 0.0


[scraping]
# === Discord Settings ===

# Enable Discord channel scraping for trading signals.
# When enabled, monitors specified Discord channels for token addresses and trading signals.
ENABLE_DISCORD = false

# Your Discord user token (self-bot). Keep this secret and never commit it to version control!
# Required when ENABLE_DISCORD is true. Get your token from browser DevTools (Application > Local Storage > discord.com > token).
DISCORD_USER_TOKEN = ""

# Guild and channel IDs to monitor for signals.
# Format: [{ guild_id = <id>, channels = [<channel_id>, ...], author_whitelist = ["user1", ...] }, ...]
# author_whitelist is optional - if not set or empty, all authors are allowed.
# If ENABLE_DISCORD is true but this is empty, Discord scraping will be automatically disabled.
DISCORD_SOURCES = [
  # { guild_id = 123456789012345678, channels = [111111111111111111, 222222222222222222] },
  # { guild_id = 987654321098765432, channels = [333333333333333333], author_whitelist = ["caller_bot", "dadeups"] },
]


# === Telegram Settings ===

# Enable Telegram scraping for trading signals (requires grammers).
# When enabled, monitors specified Telegram channels/groups for token addresses and trading signals.
ENABLE_TELEGRAM = false

# Get API credentials from https://my.telegram.org/apps
# Required when ENABLE_TELEGRAM is true. Must be a non-zero integer.
TELEGRAM_API_ID = 0

# Telegram API hash from https://my.telegram.org/apps
# Required when ENABLE_TELEGRAM is true. Keep this secret and never commit it to version control!
TELEGRAM_API_HASH = ""

# Phone number for login (with country code and '+', e.g., "+1234567890").
# Required when ENABLE_TELEGRAM is true. On first run, you'll be prompted to enter the verification code.
TELEGRAM_PHONE_NUMBER = ""

# Telegram sources to monitor (channels, groups, invite links, topics).
# Format: [{ url = "https://t.me/...", author_whitelist = ["user1", ...] }, ...]
# author_whitelist is optional - if not set or empty, all authors are allowed.
# Supported URL formats:
#   - Public channel/group: https://t.me/gramme_rs
#   - Private invite link: https://t.me/+UGEkFgsh8785ZmVk (must have access)
#   - Topic link: https://t.me/Freedomia_io/1 (monitors entire chat)
# If ENABLE_TELEGRAM is true but this is empty, Telegram scraping will be automatically disabled.
TELEGRAM_SOURCES = [
  # { url = "https://t.me/gramme_rs" },
  # { url = "https://t.me/TheReaperGems", author_whitelist = ["reaper_aped", "degenwaLdo"] },
  # { url = "https://t.me/+UGEkFgsh8785ZmVk" },
  # { url = "https://t.me/Freedomia_io/1" },
]


# === X (Twitter) Settings ===

# Enable X scraping for signals (uses Nitter RSS - no authentication required!).
# When enabled, monitors specified X accounts for token addresses and trading signals.
# Note: This uses public Nitter instances which mirror Twitter content via RSS.
ENABLE_X = false

# X accounts to monitor (usernames with or without @ prefix).
# If ENABLE_X is true but this is empty, X scraping will be automatically disabled.
X_SOURCES = [
  # "@whale_alert",
  # "pumpdotfun",
  # "_blazar",
]


# === General Scraper Filters ===

# Include keywords: ALL must be present in message (AND logic). Empty = no filter.
# Only messages containing all specified keywords will be processed for trading signals.
SCRAPERS_INCLUDE_KEYWORDS = []

# Exclude keywords: NONE must be present in message. Empty = no filter.
# Messages containing any of these keywords will be ignored.
SCRAPERS_EXCLUDE_KEYWORDS = []

# Minimum confidence score for mint address detection (0.0 - 1.0).
# Higher values = fewer false positives but may miss some valid mints.
# Lower values = more aggressive detection but may include false positives.
SCRAPERS_MIN_CONFIDENCE = 0.8
